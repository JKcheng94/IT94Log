# 类加载机制

### 编译
    通过 `javac` 编译得到的`class`文件

### 加载
    将编译之后的 `class` 文件通过类加载器加载到内存中，类加载器分为四类：引导类加载器（bootstrap classloader）、扩展类加载器（extensions classloader）、应用程序类加载器（application classloader）、自定义类加载器

    1> bootstrap classloader 加载的是 JAVA_HOME/lib 中的类；
    2> 扩展类加载器 加载的是 JAVA_HOME/lib/ext 中的类；
    3> 应用程序类加载器 加载的是classpath 下的类，是由开发人员编写的程序

    双亲委派模型： 类在加载过程中会首先委派给其父加载器加载，当父加载器加载不到时才会由其自身加载器加载，
    这样做的好处就是 **不同的类加载器加载一个对象得到的都是同一个对象**。

### 连接
    连接分为三步：验证 -> 准备 -> 解析

    1> 验证: 校验类结构的正确性，类结构必须符合jvm的编译规则；
    2> 准备: 为类的静态属性分配内存空间，并初始化为默认值，（引用类型的初始值为null）；
    3> 解析：把类中的符号引用转换为直接引用，符号引用是用一组符号描述所引用的目标；直接引用是指向目标的指针。

### 初始化
    该阶段主要是对类变量进行初始化，这一阶段的初始值是我们编码时给变量指定的初始值。**要注意和连接-准备阶段的默认值区分开**。


# 可作为GCRoots的对象

1. 虚拟机栈中的对象引用
2. 本地方法栈中JNI对象引用
3. 方法区中常量对象引用
4. 方法区中类静态属性的引用